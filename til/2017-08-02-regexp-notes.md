---
title: 正则表达式备忘录
date: 2017-08-02
tags:
  - 'regex'
---

## 特殊字符

若要匹配这些特殊字符之一，必须首先转义字符，即，在字符前面加反斜杠字符(`\`)。 例
如，若要搜索 "+" 文本字符，可使用表达式 "`\+`"。

| 符号 |                                      意义                                       | 例子                                                                                                                         |
| :--: | :-----------------------------------------------------------------------------: | :--------------------------------------------------------------------------------------------------------------------------- |
| `.`  |                          匹配除了换行符以外的任意字符                           |                                                                                                                              |
| `^`  | 表示字符串开头。<br/> 如果将 ^ 用作括号表达式中的第一个字符，则会对字符集求反。 | `^\d{3}` 与搜索字符串开始处的 3 个数字匹配。                                                                                 |
| `$`  |                                表示字符串结尾。                                 | `test` 可以匹配 test 和 testtool，但 `test$` 只能匹配 test。                                                                 |
| `*`  |                 `*` 表示后面可跟 0 个或多个字符。 等效于 `{0,}`                 | `abc*` 可以匹配 abc 或者 abcd 或者 abcdefg 等等。                                                                            |
| `+`  |                 `+` 表示后面可跟 1 个或多个字符。 等效于 `{1,}`                 |                                                                                                                              |
| `?`  |                `?` 表示后面可跟 0 个或 1 个字符。 等效于 `{0,1}`                |                                                                                                                              |
| `()` |            标记子表达式的开始和结尾。可以保存子表达式以备将来之用。             |                                                                                                                              |
| `[]` |                                 表示一个字符集                                  | `[abc]` 会匹配字符 a, b 或者 c，`[a-z]` 匹配所有小写字母，`[a-zA-Z0-9]` 匹配所有字母和数字，`[^6]` 表示除了 6 以外的任意字符 |
| `{}` |                         标记限定符表达式的开始和结尾。                          |                                                                                                                              |
| `\`  |                     对特殊字符进行转义，或者是指定特殊序列                      | `\n` 与换行符匹配。`\(` 与 "(" 匹配。`\\` 与 "\" 匹配。                                                                      |
| `\|` |                  或者，在两个或者多个之间只匹配其中一个表达式                   | `z \| food`与 "z" 或 "food" 匹配。`(z \| f)ood` 与 "zood" 或 "food" 匹配。                                                   |

## 模式匹配

|    符号     |                                                                    意义                                                                     | 例子                                                                                                                                                                                                                       |
| :---------: | :-----------------------------------------------------------------------------------------------------------------------------------------: | :------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
|    `{m}`    |                                                           对于前一个字符重复 m 次                                                           | `a{6}` 匹配 6 个'a'                                                                                                                                                                                                        |
|   `{m,n}`   |                                         对于前一个字符重复 m 到 n 次。(逗号和数字之间不能有空格。)                                          | `a{2,4}` 匹配 2-4 个 a，`a{2,}` 匹配 2 个以上 a，`a{,4}` 匹配 4 个以下 a                                                                                                                                                   |
| `(pattern)` |                                                       与 `pattern` 匹配并保存匹配项。                                                       | `(Chapter \| Section)[1-9]` 与 "Chapter 5" 匹配，保存"Chapter"以备将来之用                                                                                                                                                 |
|  `(?#...)`  |                                                           注释，忽略括号内的内容                                                            |                                                                                                                                                                                                                            |
|  `(?:...)`  |        与 `...` 匹配，但不保存匹配项；<br/>即不会存储匹配项以备将来之用。<br/>这对于用 "or" 字符 `( \| )` 组合模式部件的情况很有用。        | `industr(?:y \| ies)`与`industry \| industries` 相等。                                                                                                                                                                     |
|  `(?=...)`  |                 正预测先行。<br/>找到一个匹配项后，将在匹配文本之前开始搜索下一个匹配项。<br/>不会保存匹配项以备将来之用。                  | `^(?=.*\d).{4,8}$` 对密码应用以下限制：其长度必须介于 4 到 8 个字符之间，并且必须至少包含一个数字。<br/> `Windows(?=95 \| 98 \| NT \| 2000)` 能匹配「Windows2000」中的「Windows」，但不能匹配「Windows3.1」中的「Windows」 |
|  `(?!...)`  | 负预测先行, 匹配与 `...` 不匹配的搜索字符串。<br/>找到一个匹配项后，将在匹配文本之前开始搜索下一个匹配项。<br/>不会保存匹配项以备将来之用。 | 例如 `Windows(?!95 \| 98 \| NT \| 2000)` 能匹配「Windows3.1」中的「Windows」，但不能匹配「Windows2000」中的「Windows」。                                                                                                   |
|   `[xyz]`   |                                                      字符集。与任何一个指定字符匹配。                                                       | `[abc]` 与 "plain" 中的 "a" 匹配。                                                                                                                                                                                         |
|  `[^xyz]`   |                                                    反向字符集。与未指定的任何字符匹配。                                                     | `[^abc]` 与 "plain" 中的 "p"、"l"、"i"和 "n" 匹配。                                                                                                                                                                        |
|   `[a-z]`   |                                                    字符范围。匹配指定范围内的任何字符。                                                     | `[a-z]` 与 "a" 到 "z" 范围内的任何小写字母字符匹配。                                                                                                                                                                       |
|  `[^a-z]`   |                                               反向字符范围。与不在指定范围内的任何字符匹配。                                                | `[^a-z]` 与不在范围 "a" 到 "z" 内的任何字符匹配。                                                                                                                                                                          |

更多 `(?<=|<!...)` 等的组合可以见参考内容[4][deerchao]。

## 贪婪与懒惰

当 `?` 紧随任何其他限定符（`*`、`+`、`?`、`{n}`、`{n,}` 或 `{n,m}`）之后时，匹配
模式是非贪婪的。非贪婪模式匹配搜索到的、尽可能少的字符串，而默认的贪婪模式匹配搜
索到的、尽可能多的字符串。

|       符号       |                        意义                        | 例子                                                                                                   |
| :--------------: | :------------------------------------------------: | :----------------------------------------------------------------------------------------------------- |
| `*?`, `+?`, `??` |                                                    | `<*>` 会匹配 "\<H1\>title\<\/H1\>" 整个字符串（贪婪匹配），使用 `*?` 可以只找出 "\<H1\>"（非贪婪匹配） |
|     `{m,n}?`     | 对于前一个字符重复 m 到 n 次，并且取尽可能少的情况 | 在字符串'aaaaaa'中，`a{2,4}` 会匹配 4 个 a，但 `a{2,4}?` 只匹配 2 个 a                                 |

## 特殊序列

包含 `\` 的特殊序列的意义

| 特殊表达式序列 | 意义                                               |
| :------------: | :------------------------------------------------- |
|      `\A`      | 只在字符串开头进行匹配                             |
|      `\b`      | 匹配位于开头或者结尾的空字符串                     |
|      `\B`      | 匹配不位于开头或者结尾的空字符串                   |
|      `\d`      | 匹配任意十进制数，相当于 `[0-9]`                   |
|      `\D`      | 匹配任意非数字字符，相当于 `[^0-9]`                |
|      `\s`      | 匹配任意空白字符，相当于 `[\t\n\r\f\v]`            |
|      `\S`      | 匹配任意非空白字符，相当于 `[^\t\n\r\f\v]`         |
|      `\w`      | 匹配任意数字和字母，相当于 `[a-zA-Z0-9_]`          |
|      `\W`      | 匹配任意非数字和字母的字符，相当于 `[^a-zA-Z0-9_]` |
|      `\Z`      | 只在字符串结尾进行匹配                             |

## 优先权

正则表达式的计算方式与算术表达式非常类似；即从左到右进行计算，并遵循优先级顺序。
下表按从高到低的顺序包含了正则表达式运算符的优先级顺序。

| 优先权 |                 符号                  |     说明     |
| :----: | :-----------------------------------: | :----------: |
|   1    |                  `\`                  |    转义符    |
|   2    |      `()`, `(?:)`, `(?=)`, `[]`       | 括号和中括号 |
|   3    | `*`, `+`, `?`, `{n}`, `{n,}`, `{m,n}` |    限定符    |
|   4    |      `^`, `$`, `\metacharacter`       | 定位点和序列 |
|   5    |                 `\|`                  |     替换     |

- 字符具有高于替换运算符的优先级，例如，允许"m|food"匹配"m"或"food"。

## 非打印字符

下表包含表示非打印字符的转义序列。

| 字符 |                    匹配                    | 等效于           |
| :--: | :----------------------------------------: | :--------------- |
| `\f` |                   换页符                   | `x0c` and `\cL`  |
| `\n` |                   换行符                   | `\x0a` and `\cJ` |
| `\r` |                   回车符                   | `x0d` and `\cm`  |
| `\s` | 任何空白字符，其中包括空格、制表符和换页符 | `[\f\n\r\t\v]`   |
| `\S` |               任何非空白字符               | `[^\f\n\r\t\v]`  |
| `\t` |                  Tab 字符                  | `\x09` and `\cI` |
| `\v` |                 垂直制表符                 | `\x0b` and `\cK` |

## References

1. [正则表达式 - Wikipedia](https://zh.wikipedia.org/wiki/正则表达式)
2. [使用 Python 模块 re 实现解析小工具](https://www.ibm.com/developerworks/cn/opensource/os-cn-pythonre/index.html)
3. [MSDN 正则表达式语法](<https://msdn.microsoft.com/zh-cn/library/ae5bf541(v=vs.100).aspx>)
4. [正则表达式 30 分钟入门教程](https://deerchao.net/tutorials/regex/regex.htm)
5. [常用正则表达式](https://deerchao.net/tutorials/regex/common.htm)
6. 🌟 [RegEX 备忘清单](https://quickref.me/zh-CN/docs/regex.html)
